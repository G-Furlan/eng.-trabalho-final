{% extends 'base.html' %}

{% block content %}
    
    <div class="calendar-header">
        <h2>ğŸ“… CalendÃ¡rio de Eventos</h2>
        <p>Confira os prÃ³ximos torneios e garanta sua vaga!</p>
    </div>
    
    <!-- NOVO: BARRA DE PESQUISA -->
    <div class="search-bar-container" style="max-width: 600px; margin: 0 auto 40px auto;">
        <form action="{{ url_for('lista_eventos') }}" method="GET" style="display: flex; gap: 10px;">
            <input type="text" name="q" placeholder="Busque por nome do evento ou jogo..." value="{{ termo_busca }}" style="flex: 1;">
            <button type="submit" class="btn btn-primary">Buscar ğŸ”</button>
            {% if termo_busca %}
                <a href="{{ url_for('lista_eventos') }}" class="btn btn-secondary">Limpar</a>
            {% endif %}
        </form>
    </div>
    
    <!-- MUDANÃ‡A: Usando um grid de calendÃ¡rio -->
    <div class="calendar-grid">
        
        {% if not eventos %}
            <div class="empty-state-calendar">
                {% if termo_busca %}
                    <p>Nenhum evento encontrado para "<strong>{{ termo_busca }}</strong>".</p>
                {% else %}
                    <p>Nenhum evento agendado no momento.</p>
                {% endif %}
            </div>
        {% endif %}

        {% for e in eventos %}
            <div class="calendar-card">
                <!-- ... (MANTENHA O CONTEÃšDO DO CARD IGUAL) ... -->
                
                <!-- A "Folhinha" de Data -->
                <div class="calendar-date">
                    <span class="day">{{ e.data.strftime('%d') }}</span>
                    <span class="month">{{ e.data.strftime('%b').upper() }}</span>
                </div>

                <!-- O ConteÃºdo do Evento -->
                <div class="calendar-content">
                    <div class="calendar-badges">
                        <span class="badge-game">{{ e.jogo }}</span>
                        <span class="badge-time">â° {{ e.horario.strftime('%H:%M') }}</span>
                    </div>
                    
                    <h3>{{ e.nome }}</h3>
                    
                    <p class="organizer">por {{ e.organizador.nome }}</p>
                    
                    <div class="calendar-info">
                        <span>ğŸ“ {{ e.local }}</span>
                        <span>ğŸ‘¥ {{ e.limite_jogadores or 'Ilimitado' }} vagas</span>
                    </div>

                    <a href="{{ url_for('evento_detalhe', id=e.id) }}" class="btn-calendar-action">Ver Detalhes</a> 
                </div>
            </div>
        {% endfor %}
    </div>

{% endblock %}