{% extends 'base.html' %}

{% block content %}
    
    <div class="dashboard-header">
        <h2>Meu Dashboard de Organizador</h2>
        <a href="{{ url_for('criar_evento') }}" class="btn btn-primary">Criar Novo Evento</a>
    </div>

    <!-- Lista de eventos ATIVOS -->
    <h3>Eventos Ativos</h3>
    <div class="list-wrapper">
        {% if eventos_ativos %}
            {% for e in eventos_ativos %}
                <div class="card">
                    <h3>{{ e.nome }}</h3>
                    <p>Data: {{ e.data.strftime('%d/%m/%Y') }}</p>
                    <p>Status: <span class="evento-status status-{{ e.status.lower() }}">{{ e.status }}</span></p>

                    <div class="card-actions">
                        <!-- BotÃ£o GERENCIAR -->
                        <a href="{{ url_for('evento_detalhe', id=e.id) }}" class="btn-card-edit">Gerenciar</a>
                        
                        <!-- NOVO: BotÃ£o EDITAR (Estilo inline simples pra destacar) -->
                        <a href="{{ url_for('editar_evento', id=e.id) }}" class="btn-card-edit" style="background-color: #f59e0b;">Editar</a>
                        
                        <!-- BotÃ£o EXCLUIR -->
                        <a href="{{ url_for('excluir_evento', id=e.id) }}" class="btn-delete" onclick="return confirm('Tem certeza? Isso apagarÃ¡ todas as inscriÃ§Ãµes!')">[Excluir]</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>VocÃª nÃ£o tem nenhum evento ativo no momento.</p>
        {% endif %}
    </div>

    <hr class="section-divider">

    <!-- Lista de eventos FINALIZADOS -->
    <h3>Eventos Finalizados</h3>
    <div class="list-wrapper">
        {% if eventos_finalizados %}
            {% for e in eventos_finalizados %}
                <div class="card card-finalizado">
                    <h3>{{ e.nome }}</h3>
                    <p>Data: {{ e.data.strftime('%d/%m/%Y') }}</p>
                    <p>Status: <span class="evento-status status-{{ e.status.lower() }}">{{ e.status }}</span></p>

                    <div class="card-actions">
                        <a href="{{ url_for('relatorio_evento', id=e.id) }}" class="btn-card-edit">ðŸ“Š Ver RelatÃ³rio Final</a>
                        <!-- NÃ£o colocamos Editar em evento finalizado pra preservar o histÃ³rico -->
                        <a href="{{ url_for('excluir_evento', id=e.id) }}" class="btn-delete" onclick="return confirm('Tem certeza?')">[Excluir]</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>VocÃª ainda nÃ£o finalizou nenhum evento.</p>
        {% endif %}
    </div>

{% endblock %}